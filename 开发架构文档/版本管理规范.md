# å»ºç­‘å–·æ¶‚æ–½å·¥æœºå™¨äººç‰ˆæœ¬ç®¡ç†è§„èŒƒ

## æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **æ–‡æ¡£æ ‡é¢˜** | ç‰ˆæœ¬ç®¡ç†è§„èŒƒæ–‡æ¡£ |
| **æ–‡æ¡£ç‰ˆæœ¬** | v1.0.0 |
| **ç¼–åˆ¶æ—¥æœŸ** | 2025-10-23 |
| **ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ** | Git |
| **ä»£ç æ‰˜ç®¡å¹³å°** | GitHub/GitLab |
| **å¼ºåˆ¶æ‰§è¡Œ** | æ˜¯ |

---

## ç›®å½•

- [1. Gitå·¥ä½œæµ](#1-gitå·¥ä½œæµ)
- [2. åˆ†æ”¯ç®¡ç†ç­–ç•¥](#2-åˆ†æ”¯ç®¡ç†ç­–ç•¥)
- [3. æäº¤æ¶ˆæ¯è§„èŒƒ](#3-æäº¤æ¶ˆæ¯è§„èŒƒ)
- [4. ç‰ˆæœ¬å·ç®¡ç†](#4-ç‰ˆæœ¬å·ç®¡ç†)
- [5. å‘å¸ƒæµç¨‹](#5-å‘å¸ƒæµç¨‹)
- [6. ä»£ç å®¡æŸ¥æµç¨‹](#6-ä»£ç å®¡æŸ¥æµç¨‹)
- [7. æ ‡ç­¾ç®¡ç†](#7-æ ‡ç­¾ç®¡ç†)
- [8. æœ€ä½³å®è·µ](#8-æœ€ä½³å®è·µ)

---

## 1. Gitå·¥ä½œæµ

### 1.1 é‡‡ç”¨Git Flowå·¥ä½œæµ

```
ä¸»åˆ†æ”¯ï¼ˆé•¿æœŸï¼‰ï¼š
â”œâ”€â”€ main          - ç”Ÿäº§ç¯å¢ƒä»£ç ï¼ˆä»…å‘å¸ƒç‰ˆæœ¬ï¼‰
â”œâ”€â”€ develop       - å¼€å‘ä¸»çº¿ï¼ˆé›†æˆåˆ†æ”¯ï¼‰

è¾…åŠ©åˆ†æ”¯ï¼ˆä¸´æ—¶ï¼‰ï¼š
â”œâ”€â”€ feature/*     - åŠŸèƒ½å¼€å‘åˆ†æ”¯
â”œâ”€â”€ bugfix/*      - Bugä¿®å¤åˆ†æ”¯
â”œâ”€â”€ hotfix/*      - ç´§æ€¥ä¿®å¤åˆ†æ”¯
â””â”€â”€ release/*     - å‘å¸ƒå‡†å¤‡åˆ†æ”¯
```

### 1.2 åˆ†æ”¯ç”Ÿå‘½å‘¨æœŸ

```
å¼€å‘æ–°åŠŸèƒ½ï¼š
develop â†’ feature/xxx â†’ develop â†’ release/vX.Y.Z â†’ main

ä¿®å¤Bugï¼š
develop â†’ bugfix/xxx â†’ develop

ç´§æ€¥ä¿®å¤ï¼š
main â†’ hotfix/vX.Y.Z â†’ main + develop
```

---

## 2. åˆ†æ”¯ç®¡ç†ç­–ç•¥

### 2.1 ä¸»åˆ†æ”¯ï¼ˆmainï¼‰

**ç”¨é€”**ï¼šç”Ÿäº§ç¯å¢ƒä»£ç ï¼Œä»…åŒ…å«ç¨³å®šçš„å‘å¸ƒç‰ˆæœ¬

**ä¿æŠ¤è§„åˆ™**ï¼š
- âœ… ç¦æ­¢ç›´æ¥æ¨é€ï¼ˆProtected Branchï¼‰
- âœ… å¿…é¡»é€šè¿‡Pull Requeståˆå¹¶
- âœ… è‡³å°‘1äººå®¡æŸ¥æ‰¹å‡†
- âœ… å¿…é¡»é€šè¿‡CIæµ‹è¯•
- âœ… å¿…é¡»æ›´æ–°CHANGELOG

**åˆå¹¶æ¥æº**ï¼š
- `release/*` åˆ†æ”¯ï¼ˆæ­£å¸¸å‘å¸ƒï¼‰
- `hotfix/*` åˆ†æ”¯ï¼ˆç´§æ€¥ä¿®å¤ï¼‰

**æ ‡ç­¾è§„åˆ™**ï¼š
- æ¯æ¬¡åˆå¹¶å¿…é¡»æ‰“æ ‡ç­¾ï¼š`v1.0.0`

### 2.2 å¼€å‘åˆ†æ”¯ï¼ˆdevelopï¼‰

**ç”¨é€”**ï¼šå¼€å‘ä¸»çº¿ï¼Œé›†æˆæ‰€æœ‰åŠŸèƒ½å¼€å‘

**ä¿æŠ¤è§„åˆ™**ï¼š
- âœ… ç¦æ­¢ç›´æ¥æ¨é€
- âœ… å¿…é¡»é€šè¿‡Pull Requeståˆå¹¶
- âœ… è‡³å°‘1äººå®¡æŸ¥æ‰¹å‡†
- âœ… å¿…é¡»é€šè¿‡CIæµ‹è¯•

**åˆå¹¶æ¥æº**ï¼š
- `feature/*` åˆ†æ”¯ï¼ˆåŠŸèƒ½å¼€å‘ï¼‰
- `bugfix/*` åˆ†æ”¯ï¼ˆBugä¿®å¤ï¼‰
- `hotfix/*` åˆ†æ”¯ï¼ˆåŒæ­¥ç´§æ€¥ä¿®å¤ï¼‰

### 2.3 åŠŸèƒ½åˆ†æ”¯ï¼ˆfeature/*ï¼‰

**å‘½åè§„èŒƒ**ï¼š`feature/<åŠŸèƒ½æè¿°>`

```bash
# ç¤ºä¾‹
feature/chassis-pid-control
feature/wifi-auto-reconnect
feature/oled-status-display
```

**åˆ›å»ºå’Œåˆå¹¶**ï¼š

```bash
# ä»developåˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/chassis-pid-control

# å¼€å‘å®Œæˆååˆå¹¶å›develop
git checkout develop
git pull origin develop
git merge --no-ff feature/chassis-pid-control
git push origin develop

# åˆ é™¤åŠŸèƒ½åˆ†æ”¯
git branch -d feature/chassis-pid-control
git push origin --delete feature/chassis-pid-control
```

**çº¦å®š**ï¼š
- ä»`develop`åˆ†æ”¯åˆ›å»º
- åˆå¹¶å›`develop`åˆ†æ”¯
- ä½¿ç”¨`--no-ff`ï¼ˆä¿ç•™åˆ†æ”¯å†å²ï¼‰
- åˆå¹¶ååˆ é™¤

### 2.4 ä¿®å¤åˆ†æ”¯ï¼ˆbugfix/*ï¼‰

**å‘½åè§„èŒƒ**ï¼š`bugfix/<é—®é¢˜æè¿°>`

```bash
# ç¤ºä¾‹
bugfix/encoder-overflow
bugfix/wifi-reconnect-timeout
bugfix/memory-leak-in-ros-comm
```

**æµç¨‹**ï¼šä¸`feature/*`ç›¸åŒ

### 2.5 å‘å¸ƒåˆ†æ”¯ï¼ˆrelease/*ï¼‰

**å‘½åè§„èŒƒ**ï¼š`release/v<ç‰ˆæœ¬å·>`

```bash
# ç¤ºä¾‹
release/v1.0.0
release/v1.1.0
```

**ç”¨é€”**ï¼š
- å‡†å¤‡å‘å¸ƒç‰ˆæœ¬
- æœ€åçš„Bugä¿®å¤
- æ›´æ–°ç‰ˆæœ¬å·
- æ›´æ–°CHANGELOG

**æµç¨‹**ï¼š

```bash
# 1. ä»developåˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout develop
git checkout -b release/v1.0.0

# 2. æ›´æ–°ç‰ˆæœ¬å·
# ä¿®æ”¹ version.h: #define VERSION "1.0.0"

# 3. æ›´æ–°CHANGELOG
# æ·»åŠ æ–°ç‰ˆæœ¬çš„å˜æ›´è®°å½•

# 4. æäº¤ç‰ˆæœ¬æ›´æ–°
git commit -am "Bump version to 1.0.0"

# 5. åˆå¹¶åˆ°mainå¹¶æ‰“æ ‡ç­¾
git checkout main
git merge --no-ff release/v1.0.0
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin main --tags

# 6. åˆå¹¶å›develop
git checkout develop
git merge --no-ff release/v1.0.0
git push origin develop

# 7. åˆ é™¤å‘å¸ƒåˆ†æ”¯
git branch -d release/v1.0.0
```

### 2.6 çƒ­ä¿®å¤åˆ†æ”¯ï¼ˆhotfix/*ï¼‰

**å‘½åè§„èŒƒ**ï¼š`hotfix/v<ç‰ˆæœ¬å·>`

```bash
# ç¤ºä¾‹
hotfix/v1.0.1
hotfix/v1.1.1
```

**ç”¨é€”**ï¼šç´§æ€¥ä¿®å¤ç”Ÿäº§ç¯å¢ƒBug

**æµç¨‹**ï¼š

```bash
# 1. ä»mainåˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
git checkout main
git checkout -b hotfix/v1.0.1

# 2. ä¿®å¤Bugå¹¶æµ‹è¯•

# 3. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆpatchç‰ˆæœ¬+1ï¼‰

# 4. åˆå¹¶åˆ°main
git checkout main
git merge --no-ff hotfix/v1.0.1
git tag -a v1.0.1 -m "Hotfix 1.0.1: Fix critical bug"
git push origin main --tags

# 5. åˆå¹¶åˆ°develop
git checkout develop
git merge --no-ff hotfix/v1.0.1
git push origin develop

# 6. åˆ é™¤çƒ­ä¿®å¤åˆ†æ”¯
git branch -d hotfix/v1.0.1
```

---

## 3. æäº¤æ¶ˆæ¯è§„èŒƒ

### 3.1 æäº¤æ¶ˆæ¯æ ¼å¼ï¼ˆConventional Commitsï¼‰

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 3.2 Typeç±»å‹

| Type | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **feat** | æ–°åŠŸèƒ½ | `feat(chassis): add PID speed control` |
| **fix** | Bugä¿®å¤ | `fix(wifi): resolve reconnection timeout` |
| **docs** | æ–‡æ¡£æ›´æ–° | `docs(readme): update installation guide` |
| **style** | ä»£ç æ ¼å¼ | `style(chassis): format code with clang-format` |
| **refactor** | é‡æ„ | `refactor(ros): simplify publisher creation` |
| **perf** | æ€§èƒ½ä¼˜åŒ– | `perf(odom): optimize calculation algorithm` |
| **test** | æµ‹è¯• | `test(chassis): add unit tests for PID` |
| **build** | æ„å»ºç³»ç»Ÿ | `build(pio): update platformio.ini` |
| **ci** | CIé…ç½® | `ci(github): add automated testing` |
| **chore** | å…¶ä»– | `chore(deps): update esp-idf to v5.1.2` |

### 3.3 ScopeèŒƒå›´

**èŠ‚ç‚¹çº§åˆ«**ï¼š
- `chassis` - åº•ç›˜æ§åˆ¶èŠ‚ç‚¹
- `lift` - å‡é™æœºæ„èŠ‚ç‚¹
- `environment` - ç¯å¢ƒç›‘æµ‹èŠ‚ç‚¹
- `spray` - å–·æ¶‚ç›‘æ§èŠ‚ç‚¹
- `range` - è·ç¦»æµ‹é‡èŠ‚ç‚¹
- `imu` - IMUå§¿æ€èŠ‚ç‚¹
- `power` - ç”µæºç®¡ç†èŠ‚ç‚¹

**æ¨¡å—çº§åˆ«**ï¼š
- `wifi` - WiFiç®¡ç†
- `ros` - ROSé€šä¿¡
- `config` - é…ç½®ç®¡ç†
- `oled` - OLEDæ˜¾ç¤º

### 3.4 Subjectä¸»é¢˜

**è§„åˆ™**ï¼š
- ä½¿ç”¨ç¥ˆä½¿å¥ï¼ˆ"add" not "added"ï¼‰
- é¦–å­—æ¯å°å†™
- ä¸è¶…è¿‡50ä¸ªå­—ç¬¦
- ä¸ä»¥å¥å·ç»“å°¾

**ç¤ºä¾‹**ï¼š
```
âœ… feat(chassis): add PID speed control
âŒ feat(chassis): Added PID speed control.
âŒ feat(chassis): This commit adds PID speed control to chassis
```

### 3.5 Bodyæ­£æ–‡ï¼ˆå¯é€‰ï¼‰

**ç”¨é€”**ï¼šè¯¦ç»†è¯´æ˜ä¿®æ”¹å†…å®¹å’ŒåŸå› 

```
fix(wifi): resolve connection timeout issue

The WiFi manager was not properly handling connection timeouts
when the network is temporarily unavailable. This commit adds
exponential backoff retry logic with a maximum of 5 attempts.

- Add retry counter
- Implement exponential backoff (1s, 2s, 4s, 8s, 16s)
- Emit event on max retries reached
```

### 3.6 Footerè„šæ³¨ï¼ˆå¯é€‰ï¼‰

**Breaking Changes**ï¼š

```
feat(ros): change QoS default to RELIABLE

BREAKING CHANGE: Default QoS reliability changed from BEST_EFFORT
to RELIABLE. Update all publishers and subscribers accordingly.
```

**Issueå¼•ç”¨**ï¼š

```
fix(chassis): resolve encoder overflow

Fixes #123
Closes #456
```

### 3.7 å®Œæ•´ç¤ºä¾‹

```
feat(chassis): implement odometry calculation

Add odometry calculation based on differential wheel encoders.
The algorithm computes robot pose (x, y, theta) from encoder
increments using the kinematic model of differential drive.

Implementation details:
- Read encoder values at 50Hz
- Calculate wheel distances
- Update pose using forward kinematics
- Publish to /chassis/odom topic

Closes #42
```

---

## 4. ç‰ˆæœ¬å·ç®¡ç†

### 4.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰

**æ ¼å¼**ï¼š`MAJOR.MINOR.PATCH`

```
v1.2.3
 â”‚ â”‚ â”‚
 â”‚ â”‚ â””â”€ PATCH: Bugä¿®å¤ï¼ˆå‘åå…¼å®¹ï¼‰
 â”‚ â””â”€â”€â”€ MINOR: æ–°åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
 â””â”€â”€â”€â”€â”€ MAJOR: é‡å¤§å˜æ›´ï¼ˆä¸å‘åå…¼å®¹ï¼‰
```

### 4.2 ç‰ˆæœ¬é€’å¢è§„åˆ™

| å˜æ›´ç±»å‹ | ç‰ˆæœ¬å˜åŒ– | ç¤ºä¾‹ |
|---------|---------|------|
| é‡å¤§å˜æ›´ï¼ˆä¸å…¼å®¹ï¼‰ | MAJOR + 1 | 1.2.3 â†’ 2.0.0 |
| æ–°åŠŸèƒ½ï¼ˆå…¼å®¹ï¼‰ | MINOR + 1 | 1.2.3 â†’ 1.3.0 |
| Bugä¿®å¤ | PATCH + 1 | 1.2.3 â†’ 1.2.4 |

### 4.3 é¢„å‘å¸ƒç‰ˆæœ¬

```
v1.0.0-alpha.1    # Alphaæµ‹è¯•ç‰ˆ
v1.0.0-beta.1     # Betaæµ‹è¯•ç‰ˆ
v1.0.0-rc.1       # Release Candidate
v1.0.0            # æ­£å¼ç‰ˆ
```

### 4.4 ç‰ˆæœ¬å·åœ¨ä»£ç ä¸­

```c
// include/version.h
#ifndef VERSION_H
#define VERSION_H

#define VERSION_MAJOR 1
#define VERSION_MINOR 0
#define VERSION_PATCH 0
#define VERSION_STRING "1.0.0"

#define VERSION_BUILD_DATE __DATE__
#define VERSION_BUILD_TIME __TIME__

#endif /* VERSION_H */
```

---

## 5. å‘å¸ƒæµç¨‹

### 5.1 å‘å¸ƒæ£€æŸ¥æ¸…å•

**å‘å¸ƒå‰æ£€æŸ¥**ï¼š

- [ ] æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆå¹¶åˆå¹¶åˆ°develop
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼‰
- [ ] ä»£ç è¦†ç›–ç‡è¾¾æ ‡ï¼ˆâ‰¥80%ï¼‰
- [ ] é™æ€åˆ†ææ— ä¸¥é‡é—®é¢˜
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] CHANGELOGå·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] å‘å¸ƒè¯´æ˜å·²å‡†å¤‡

### 5.2 å‘å¸ƒæ­¥éª¤

```bash
# 1. åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout develop
git checkout -b release/v1.0.0

# 2. æ›´æ–°ç‰ˆæœ¬å·
# ä¿®æ”¹ include/version.h
# ä¿®æ”¹ platformio.ini (versionå­—æ®µ)

# 3. æ›´æ–°CHANGELOG
cat >> CHANGELOG.md << EOF
## [1.0.0] - 2025-10-23

### Added
- åº•ç›˜PIDé€Ÿåº¦æ§åˆ¶
- WiFiè‡ªåŠ¨é‡è¿
- OLEDçŠ¶æ€æ˜¾ç¤º

### Changed
- ä¼˜åŒ–é‡Œç¨‹è®¡è®¡ç®—ç²¾åº¦

### Fixed
- ä¿®å¤ç¼–ç å™¨æº¢å‡ºé—®é¢˜
EOF

# 4. æäº¤ç‰ˆæœ¬æ›´æ–°
git add .
git commit -m "chore(release): bump version to 1.0.0"

# 5. åˆå¹¶åˆ°main
git checkout main
git merge --no-ff release/v1.0.0
git tag -a v1.0.0 -m "Release 1.0.0"

# 6. æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin v1.0.0

# 7. åˆå¹¶å›develop
git checkout develop
git merge --no-ff release/v1.0.0
git push origin develop

# 8. åˆ›å»ºGitHub Release
# åœ¨GitHubä¸ŠåŸºäºv1.0.0æ ‡ç­¾åˆ›å»ºRelease
# é™„åŠ ç¼–è¯‘å¥½çš„å›ºä»¶æ–‡ä»¶
```

### 5.3 å‘å¸ƒè¯´æ˜æ¨¡æ¿

```markdown
# Release v1.0.0

## ğŸ‰ æ–°åŠŸèƒ½

- **åº•ç›˜æ§åˆ¶**: å®ç°PIDé€Ÿåº¦é—­ç¯æ§åˆ¶
- **WiFiç®¡ç†**: æ”¯æŒè‡ªåŠ¨é‡è¿å’ŒæŒ‡æ•°é€€é¿
- **OLEDæ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºèŠ‚ç‚¹çŠ¶æ€å’ŒIPåœ°å€

## ğŸ”§ æ”¹è¿›

- ä¼˜åŒ–é‡Œç¨‹è®¡è®¡ç®—ç²¾åº¦ï¼Œè¯¯å·®ä»5%é™è‡³2%
- å‡å°‘å†…å­˜å ç”¨ï¼Œä»150KBé™è‡³120KB

## ğŸ› Bugä¿®å¤

- ä¿®å¤ç¼–ç å™¨è®¡æ•°æº¢å‡ºå¯¼è‡´çš„é‡Œç¨‹è®¡é”™è¯¯
- ä¿®å¤WiFié•¿æ—¶é—´æ–­å¼€åæ— æ³•é‡è¿çš„é—®é¢˜

## ğŸ“Š æ€§èƒ½æ•°æ®

- æ§åˆ¶å¾ªç¯å»¶è¿Ÿ: å¹³å‡15msï¼ˆç›®æ ‡<20msï¼‰âœ…
- ROSæ¶ˆæ¯é¢‘ç‡: 52Hzï¼ˆç›®æ ‡â‰¥50Hzï¼‰âœ…
- CPUå ç”¨ç‡: 45%ï¼ˆç›®æ ‡<60%ï¼‰âœ…
- å†…å­˜ä½¿ç”¨: 120KBï¼ˆç›®æ ‡<150KBï¼‰âœ…

## ğŸ“¦ ä¸‹è½½

- [chassis_node_v1.0.0.bin](é“¾æ¥)
- [lift_node_v1.0.0.bin](é“¾æ¥)
- [å®Œæ•´å›ºä»¶åŒ….zip](é“¾æ¥)

## ğŸ”„ å‡çº§è¯´æ˜

ä»v0.9.xå‡çº§ï¼š
```bash
pio run -e chassis_node -t upload
```

## âš ï¸ é‡å¤§å˜æ›´

æ— 

## ğŸ“ å®Œæ•´å˜æ›´æ—¥å¿—

è¯¦è§ [CHANGELOG.md](é“¾æ¥)
```

---

## 6. ä»£ç å®¡æŸ¥æµç¨‹

### 6.1 Pull Requestæµç¨‹

```
1. å¼€å‘äººå‘˜åˆ›å»ºPR
   â†“
2. CIè‡ªåŠ¨æ£€æŸ¥ï¼ˆç¼–è¯‘ã€æµ‹è¯•ã€è¦†ç›–ç‡ï¼‰
   â†“
3. æŒ‡æ´¾å®¡æŸ¥äººå‘˜ï¼ˆè‡³å°‘1äººï¼‰
   â†“
4. å®¡æŸ¥äººå‘˜å®¡æŸ¥ä»£ç 
   â†“
5. è®¨è®ºå’Œä¿®æ”¹
   â†“
6. å®¡æŸ¥äººå‘˜æ‰¹å‡†
   â†“
7. åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯
   â†“
8. åˆ é™¤æºåˆ†æ”¯
```

### 6.2 PRæ ‡é¢˜è§„èŒƒ

ä½¿ç”¨ä¸commit messageç›¸åŒçš„æ ¼å¼ï¼š

```
feat(chassis): add PID speed control
fix(wifi): resolve connection timeout
docs(readme): update hardware connection guide
```

### 6.3 PRæè¿°æ¨¡æ¿

```markdown
## å˜æ›´ç±»å‹
- [ ] æ–°åŠŸèƒ½
- [ ] Bugä¿®å¤
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æµ‹è¯•
- [ ] å…¶ä»–

## å˜æ›´è¯´æ˜
ç®€è¦æè¿°æ­¤PRçš„ç›®çš„å’Œå®ç°æ–¹å¼

## ç›¸å…³Issue
Closes #42

## æµ‹è¯•
æè¿°å¦‚ä½•æµ‹è¯•æ­¤å˜æ›´

- [ ] å•å…ƒæµ‹è¯•å·²é€šè¿‡
- [ ] é›†æˆæµ‹è¯•å·²é€šè¿‡
- [ ] ç¡¬ä»¶æµ‹è¯•å·²é€šè¿‡

## æˆªå›¾/æ—¥å¿—
ï¼ˆå¦‚æœé€‚ç”¨ï¼‰

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªç¼–ç è§„èŒƒ
- [ ] å·²æ·»åŠ /æ›´æ–°æµ‹è¯•
- [ ] å·²æ›´æ–°æ–‡æ¡£
- [ ] CIæ£€æŸ¥é€šè¿‡
- [ ] ä»£ç å·²è‡ªæˆ‘å®¡æŸ¥
```

### 6.4 å®¡æŸ¥æ„è§

**ä½¿ç”¨GitHub ReviewåŠŸèƒ½**ï¼š

- âœ… **Approve**: æ‰¹å‡†åˆå¹¶
- ğŸ’¬ **Comment**: ä»…è¯„è®ºï¼Œä¸é˜»æ­¢åˆå¹¶
- âŒ **Request changes**: éœ€è¦ä¿®æ”¹

**æ„è§ç±»å‹æ ‡è®°**ï¼š

```
ğŸ”´ å¿…é¡»ä¿®æ”¹ (blocking): å¿…é¡»è§£å†³æ‰èƒ½åˆå¹¶
ğŸŸ¡ å»ºè®® (non-blocking): å»ºè®®æ”¹è¿›ï¼Œä¸é˜»æ­¢åˆå¹¶
ğŸ”µ é—®é¢˜ (question): éœ€è¦æ¾„æ¸…
ğŸ’¡ æç¤º (nit): å°é—®é¢˜ï¼ˆæ ¼å¼ã€æ‹¼å†™ç­‰ï¼‰
```

---

## 7. æ ‡ç­¾ç®¡ç†

### 7.1 æ ‡ç­¾å‘½å

**ç‰ˆæœ¬æ ‡ç­¾**ï¼š`v<ç‰ˆæœ¬å·>`

```bash
v1.0.0
v1.1.0
v2.0.0-beta.1
```

**é‡Œç¨‹ç¢‘æ ‡ç­¾**ï¼š`milestone/<åç§°>`

```bash
milestone/mvp
milestone/production-ready
```

### 7.2 åˆ›å»ºæ ‡ç­¾

```bash
# è½»é‡æ ‡ç­¾ï¼ˆä¸æ¨èï¼‰
git tag v1.0.0

# é™„æ³¨æ ‡ç­¾ï¼ˆæ¨èï¼‰
git tag -a v1.0.0 -m "Release version 1.0.0"

# ä¸ºå†å²æäº¤æ‰“æ ‡ç­¾
git tag -a v1.0.0 9fceb02 -m "Release 1.0.0"

# æ¨é€æ ‡ç­¾
git push origin v1.0.0

# æ¨é€æ‰€æœ‰æ ‡ç­¾
git push origin --tags
```

### 7.3 åˆ é™¤æ ‡ç­¾

```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v1.0.0

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin --delete v1.0.0
```

---

## 8. æœ€ä½³å®è·µ

### 8.1 æäº¤é¢‘ç‡

**åŸåˆ™**ï¼šå°æ­¥å¿«è·‘ï¼Œé¢‘ç¹æäº¤

```
âœ… æ¯å®Œæˆä¸€ä¸ªå°åŠŸèƒ½å°±æäº¤
âœ… ä¿®å¤ä¸€ä¸ªBugåç«‹å³æäº¤
âœ… é‡æ„ä¸€ä¸ªå‡½æ•°åæäº¤

âŒ ä¸€å¤©åªæäº¤ä¸€æ¬¡
âŒ åŒ…å«å¤šä¸ªä¸ç›¸å…³çš„ä¿®æ”¹
```

### 8.2 æäº¤ç²’åº¦

**ä¸€ä¸ªæäº¤åº”è¯¥**ï¼š
- åªåšä¸€ä»¶äº‹
- èƒ½ç‹¬ç«‹ç¼–è¯‘
- èƒ½é€šè¿‡æµ‹è¯•

```
âœ… å¥½çš„æäº¤ï¼š
   - feat(chassis): add PID controller
   - feat(chassis): add odometry calculation
   - test(chassis): add PID tests

âŒ ä¸å¥½çš„æäº¤ï¼š
   - feat(chassis): implement everything
     (åŒ…å«PIDã€é‡Œç¨‹è®¡ã€æµ‹è¯•ã€æ–‡æ¡£)
```

### 8.3 åˆ†æ”¯ç”Ÿå‘½å‘¨æœŸ

```
featureåˆ†æ”¯ï¼š1-7å¤©
  - è¶…è¿‡7å¤©åº”è€ƒè™‘æ‹†åˆ†

bugfixåˆ†æ”¯ï¼šå‡ å°æ—¶åˆ°1å¤©
  - å°½å¿«ä¿®å¤å¹¶åˆå¹¶

releaseåˆ†æ”¯ï¼š1-3å¤©
  - ä»…Bugä¿®å¤å’Œæ–‡æ¡£æ›´æ–°

hotfixåˆ†æ”¯ï¼šå‡ å°æ—¶
  - ç´§æ€¥ä¿®å¤ï¼Œè¶Šå¿«è¶Šå¥½
```

### 8.4 å†²çªè§£å†³

```bash
# 1. ä¿æŒåˆ†æ”¯æ›´æ–°
git checkout feature/my-feature
git fetch origin
git rebase origin/develop

# 2. è§£å†³å†²çª
# ç¼–è¾‘å†²çªæ–‡ä»¶
git add .
git rebase --continue

# 3. å¼ºåˆ¶æ¨é€ï¼ˆä»…è‡ªå·±çš„åˆ†æ”¯ï¼‰
git push origin feature/my-feature --force-with-lease
```

### 8.5 å†å²æ¸…ç†

```bash
# äº¤äº’å¼rebaseæ¸…ç†æäº¤å†å²
git rebase -i HEAD~5

# é€‰é¡¹ï¼š
# pick   - ä¿ç•™æäº¤
# reword - ä¿®æ”¹æäº¤æ¶ˆæ¯
# squash - åˆå¹¶åˆ°ä¸Šä¸€ä¸ªæäº¤
# fixup  - åˆå¹¶åˆ°ä¸Šä¸€ä¸ªæäº¤ï¼Œä¸¢å¼ƒæ¶ˆæ¯
# drop   - åˆ é™¤æäº¤

# ç¤ºä¾‹ï¼šå°†å¤šä¸ªWIPæäº¤åˆå¹¶
pick abc123 feat(chassis): add PID
squash def456 WIP: fix bug
squash ghi789 WIP: another fix
```

### 8.6 .gitignoreé…ç½®

```gitignore
# PlatformIO
.pio/
.vscode/.browse.c_cpp.db*
.vscode/c_cpp_properties.json
.vscode/launch.json

# ESP-IDF
build/
sdkconfig
sdkconfig.old
managed_components/

# ç¼–è¯‘è¾“å‡º
*.o
*.a
*.elf
*.bin
*.map

# æµ‹è¯•å’Œè¦†ç›–ç‡
test_report/
coverage/
*.gcov
*.gcda
*.gcno

# IDE
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# æ—¥å¿—
*.log

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.bak
```

---

## é™„å½•

### A. Gité…ç½®

```bash
# ç”¨æˆ·ä¿¡æ¯
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# é»˜è®¤ç¼–è¾‘å™¨
git config --global core.editor "code --wait"

# å·®å¼‚å·¥å…·
git config --global diff.tool vscode
git config --global difftool.vscode.cmd "code --wait --diff $LOCAL $REMOTE"

# åˆå¹¶å·¥å…·
git config --global merge.tool vscode
git config --global mergetool.vscode.cmd "code --wait $MERGED"

# åˆ«å
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.lg "log --graph --oneline --all --decorate"

# è‡ªåŠ¨æ¢è¡Œ
git config --global core.autocrlf input  # Linux/Mac
git config --global core.autocrlf true   # Windows
```

### B. å¸¸ç”¨Gitå‘½ä»¤

```bash
# æŸ¥çœ‹çŠ¶æ€
git status

# æŸ¥çœ‹å·®å¼‚
git diff
git diff --staged

# æŸ¥çœ‹æ—¥å¿—
git log --oneline --graph --all
git log --author="John"
git log --since="2 weeks ago"

# æ’¤é”€ä¿®æ”¹
git checkout -- file.c      # æ’¤é”€å·¥ä½œåŒºä¿®æ”¹
git reset HEAD file.c       # æ’¤é”€æš‚å­˜
git commit --amend          # ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤

# åˆ†æ”¯æ“ä½œ
git branch                  # åˆ—å‡ºåˆ†æ”¯
git branch -d feature/xxx   # åˆ é™¤åˆ†æ”¯
git branch -D feature/xxx   # å¼ºåˆ¶åˆ é™¤

# è¿œç¨‹æ“ä½œ
git fetch origin            # æ‹‰å–è¿œç¨‹æ›´æ–°
git pull origin develop     # æ‹‰å–å¹¶åˆå¹¶
git push origin feature/xxx # æ¨é€åˆ†æ”¯

# Stashï¼ˆä¸´æ—¶ä¿å­˜ï¼‰
git stash                   # ä¿å­˜å½“å‰ä¿®æ”¹
git stash list              # åˆ—å‡ºstash
git stash apply             # åº”ç”¨stash
git stash drop              # åˆ é™¤stash
```

### C. ç´§æ€¥æƒ…å†µå¤„ç†

**è¯¯åˆ æ–‡ä»¶**ï¼š
```bash
git checkout HEAD -- deleted_file.c
```

**æäº¤åˆ°é”™è¯¯åˆ†æ”¯**ï¼š
```bash
# åœ¨æ­£ç¡®åˆ†æ”¯
git cherry-pick <commit-hash>

# åœ¨é”™è¯¯åˆ†æ”¯
git reset --hard HEAD~1
```

**æ¨é€äº†æ•æ„Ÿä¿¡æ¯**ï¼š
```bash
# 1. ä»å†å²ä¸­åˆ é™¤
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch path/to/file" \
  --prune-empty --tag-name-filter cat -- --all

# 2. å¼ºåˆ¶æ¨é€
git push origin --force --all

# 3. é€šçŸ¥æ‰€æœ‰å¼€å‘è€…é‡æ–°å…‹éš†ä»“åº“
```

---

**æ–‡æ¡£ç»“æŸ**

**ç¼–å†™äºº**ï¼šç‰ˆæœ¬ç®¡ç†ä¸“å®¶  
**å®¡æ ¸äºº**ï¼šæŠ€æœ¯è´Ÿè´£äºº  
**ç‰ˆæœ¬**ï¼šv1.0.0  
**æ—¥æœŸ**ï¼š2025-10-23  
**å¼ºåˆ¶æ‰§è¡Œæ—¥æœŸ**ï¼š2025-11-01